version: '3.3'


services:

  jellyfin:
    image: lscr.io/linuxserver/jellyfin:${JELLYFIN_TAG}
    restart: unless-stopped

    labels:
      - 'com.centurylinklabs.watchtower.enable=true'

    environment:
      PUID: ${PUID}
      PGID: ${PGID}
      TZ: ${TZ}
      JELLYFIN_PublishedServerUrl: ${JELLYFIN_DOMAIN}

    volumes:
      - ${JELLYFIN_CONFIG_DIR}:/config:cached
      - ${JELLYFIN_MEDIA_ROOT}:/media:cached

    ports:
      - ${JELLYFIN_PORT}:8096

    devices:
      # Mount this for hardware accelleration.
      - /dev/dri:/dev/dri
